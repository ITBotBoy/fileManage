import{c$ as r,d as e,h as o,Y as a,S as t,F as i,cQ as s,bd as n,r as l,o as c,p as d,aE as f,bc as u,ad as m,ae as p,v as b,w as g,z as j,s as E}from"./index.5b397b81.js";import y from"./DetailModal.3799f34a.js";import{s as x,u as R}from"./useTable.edd65bfa.js";import{t as h}from"./index.f0b9f698.js";import{b as C}from"./index.55a98ad3.js";import{getColumns as k}from"./data.bf50add5.js";import"./index.5ce676ba.js";import"./index.fd47b0b6.js";import"./domUtils.a209b89e.js";import"./useWindowSizeFn.39afe110.js";import"./index.be505e56.js";import"./index.9b68ed0e.js";import"./useFullScreen.36959c2f.js";import"./index.b8c2752b.js";import"./zh_CN.0242bd16.js";import"./upload.97995f59.js";import"./CheckOutlined.849f8089.js";var w;(w||(w={})).Error="/error";var T=e({name:"ErrorHandler",components:{DetailModal:y,BasicTable:x,TableAction:h},setup(){const e=o(),l=o([]),{t:c}=a("sys.errorLog"),[d,{setTableData:f}]=R({title:c("sys.errorLog.tableTitle"),columns:k(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[u,{openModal:m}]=C();return t((()=>n.getErrorInfoState),(r=>{i((()=>{f(s(r))}))}),{immediate:!0}),{register:d,registerModal:u,handleDetail:function(r){e.value=r,m(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:c}}});const D={class:"p-4"},L=["src"];T.render=function(r,e,o,a,t,i){const s=l("DetailModal"),n=l("a-button"),y=l("TableAction"),x=l("BasicTable");return c(),d("div",D,[(c(!0),d(f,null,u(r.imgListRef,(r=>m((c(),d("img",{key:r,src:r},null,8,L)),[[p,!1]]))),128)),b(s,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),b(x,{onRegister:r.register,class:"error-handle-table"},{toolbar:g((()=>[b(n,{onClick:r.fireVueError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireResourceError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireAjaxError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:g((({record:e})=>[b(y,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{T as default};
