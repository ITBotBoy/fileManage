import{bX as e,dc as r,dd as t,de as n,bM as i,df as o,dg as a,cJ as u,bZ as l,d8 as c,l as s}from"./index.cefb3244.js";import{u as d}from"./useTable.92e68e9b.js";import{q as f}from"./index.47a8bedc.js";import{b as p}from"./index.5213a239.js";import{i as b}from"./useFullScreen.a1ba7702.js";function g(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),u=void 0!==t,l=null===t,c=t==t,s=r(t);if(!l&&!s&&!a&&e>t||a&&u&&c&&!l&&!s||i&&u&&c||!n&&c||!o)return 1;if(!i&&!a&&!s&&e<t||s&&n&&o&&!i&&!a||l&&n&&o||!u&&o||!c)return-1}return 0}function m(r,l,c){l=l.length?t(l,(function(e){return i(e)?function(r){return o(r,1===e.length?e[0]:e)}:e})):[n];var s=-1;l=t(l,a(u));var d=function(r,t){var n=-1,i=e(r)?Array(r.length):[];return f(r,(function(e,r,o){i[++n]=t(e,r,o)})),i}(r,(function(e,r,n){return{criteria:t(l,(function(r){return r(e)})),index:++s,value:e}}));return function(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}(d,(function(e,r){return function(e,r,t){for(var n=-1,i=e.criteria,o=r.criteria,a=i.length,u=t.length;++n<a;){var l=g(i[n],o[n]);if(l)return n>=u?l:l*("desc"==t[n]?-1:1)}return e.index-r.index}(e,r,c)}))}var j=l((function(e,r){if(null==e)return[];var t=r.length;return t>1&&b(e,r[0],r[1])?r=[]:t>2&&b(r[0],r[1],r[2])&&(r=[r[0]]),m(e,c(r,1),[])}));const{createConfirm:v}=s();function y(e){return e.filter((e=>!e.hide))}function O(e){return j(e.filter((e=>!1!==e.display)).map((e=>(!e.component&&(e.component="Input"),!e.order&&(e.order=0),e))),"order")}function h(e){const[r,{reload:t,getDataSource:n,isInit:i}]=d(e),[o,{openModal:a,transferModalData:u,closeModal:l}]=p();return[{registerTable:r,reload:t,getDataSource:n,isInit:i},{registerDialog:o,openModal:a,transferModalData:u,closeModal:l},{rowDelete:function(r,n){(function(e){return new Promise((r=>{v({iconType:"warning",title:e||"确认执行？",onOk(){r(!0)}})}))})(n).then((n=>{e.rowDeleteApi(r).then((e=>{t({page:1})}))}))},rowSave:function(r){e.relyObject.id?(r.id=e.relyObject.id,e.rowEditApi(r).then((e=>{l(),t({page:1})}))):e.rowSaveApi(r).then((e=>{l(),t({page:1})}))},rowEdit:function(r,t,n){e.relyObject.id=t.id,e.relyObject.title=n||"编辑"+(e.relyObject.append||""),a(),setTimeout((()=>{r.resetFields(),t=Object.assign({},t),u(t)}),0)},rowAdd:function(r,t={},n){e.relyObject.id=null,e.relyObject.title=n||"新增"+(e.relyObject.append||""),a(),setTimeout((()=>{r.resetFields();const n={...e.relyObject.initForm||{},...t};e.relyObject.initForm&&u(Object.assign({},n))}),0)}}]}export{y as a,O as g,h as u};
