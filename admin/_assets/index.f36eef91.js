import{c$ as r,d as e,h as o,Y as a,S as t,F as i,cQ as s,bd as n,r as l,o as c,p as d,aE as u,bc as f,ad as m,ae as p,v as b,w as g,z as j,s as E}from"./index.cefb3244.js";import y from"./DetailModal.2a23d3e4.js";import{s as x,u as R}from"./useTable.92e68e9b.js";import{t as h}from"./index.47a8bedc.js";import{b as C}from"./index.5213a239.js";import{getColumns as k}from"./data.7195ce79.js";import"./index.2407b44b.js";import"./index.e7ff9b58.js";import"./domUtils.a209b89e.js";import"./useWindowSizeFn.6a91d172.js";import"./index.21a20b5a.js";import"./index.172950c5.js";import"./useFullScreen.a1ba7702.js";import"./index.37892b32.js";import"./zh_CN.0242bd16.js";import"./upload.2162c831.js";import"./CheckOutlined.5f5d8f8a.js";var w;(w||(w={})).Error="/error";var T=e({name:"ErrorHandler",components:{DetailModal:y,BasicTable:x,TableAction:h},setup(){const e=o(),l=o([]),{t:c}=a("sys.errorLog"),[d,{setTableData:u}]=R({title:c("sys.errorLog.tableTitle"),columns:k(),actionColumn:{width:80,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),[f,{openModal:m}]=C();return t((()=>n.getErrorInfoState),(r=>{i((()=>{u(s(r))}))}),{immediate:!0}),{register:d,registerModal:f,handleDetail:function(r){e.value=r,m(!0)},fireVueError:function(){throw new Error("fire vue error!")},fireResourceError:function(){l.value.push(`${(new Date).getTime()}.png`)},fireAjaxError:async function(){await r.request({url:w.Error,method:"GET"})},imgListRef:l,rowInfoRef:e,t:c}}});const D={class:"p-4"},L=["src"];T.render=function(r,e,o,a,t,i){const s=l("DetailModal"),n=l("a-button"),y=l("TableAction"),x=l("BasicTable");return c(),d("div",D,[(c(!0),d(u,null,f(r.imgListRef,(r=>m((c(),d("img",{key:r,src:r},null,8,L)),[[p,!1]]))),128)),b(s,{info:r.rowInfoRef,onRegister:r.registerModal},null,8,["info","onRegister"]),b(x,{onRegister:r.register,class:"error-handle-table"},{toolbar:g((()=>[b(n,{onClick:r.fireVueError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireVueError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireResourceError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireResourceError")),1)])),_:1},8,["onClick"]),b(n,{onClick:r.fireAjaxError,type:"primary"},{default:g((()=>[j(E(r.t("sys.errorLog.fireAjaxError")),1)])),_:1},8,["onClick"])])),action:g((({record:e})=>[b(y,{actions:[{label:r.t("sys.errorLog.tableActionDesc"),onClick:r.handleDetail.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])])};export{T as default};
