import{d as e,h as t,c as s,j as n,U as a,b5 as o,bk as i,cQ as r,bm as l,bn as c,Y as d,r as u,o as p,a as m,w as f,v as b,m as x}from"./index.cefb3244.js";import{g as h,w as j,a as g}from"./index.5213a239.js";import{D as v}from"./index.2407b44b.js";import{C as D}from"./index.e7ff9b58.js";import{p as y}from"./index.21a20b5a.js";import{getDescSchema as w}from"./data.7195ce79.js";import"./useWindowSizeFn.6a91d172.js";import"./domUtils.a209b89e.js";import"./index.172950c5.js";var M={useCollapse:y.bool.def(!0),title:y.string.def(""),size:y.oneOf(["small","default","middle",void 0]).def("small"),bordered:y.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:y.object};var O=e({name:"Description",props:M,emits:["register"],setup(e,{attrs:l,slots:c,emit:d}){const u=t(null),p=s((()=>({...e,...n(u)}))),m=s((()=>({...n(p),title:void 0}))),f=s((()=>!!n(p).title)),b=s((()=>({canExpand:!1,...n(m).collapseOptions}))),x=s((()=>({...l,...n(m)})));function j({label:e,labelMinWidth:t,labelStyle:s}){if(!s&&!t)return e;const n={...s,minWidth:`${t}px `};return a("div",{style:n},e)}const g=()=>a(v,{class:"description",...n(x)},(()=>function(){const{schema:e}=n(m);return n(e).map((e=>{const{render:t,field:s,span:i,show:r,contentMinWidth:l}=e,{data:c}=n(m);if(r&&o(r)&&!r(c))return null;const d=()=>o(t)?t(null==c?void 0:c[s],c):n(c)&&n(c)[s],u=l;return a(v.Item,{label:j(e),key:s,span:i},(()=>l?a("div",{style:{minWidth:`${u}px`}},d()):d()))}))}()));return d("register",{setDescProps:function(e){const t=i(n(u)||{},e);u.value=r(t)}}),()=>n(f)?(()=>{const t=e.useCollapse?g():a("div",null,g());if(!e.useCollapse)return t;const{canExpand:s,helpMessage:o}=n(b),{title:i}=n(p);return a(D,{title:i,canExpan:s,helpMessage:o},{default:()=>t,action:()=>h(c,"action")})})():g()}});var E=e({name:"ErrorLogDetailModal",components:{BasicModal:g,Description:j(O)},props:{info:{type:Object,default:null}},setup(){const{t:e}=d("sys.errorLog"),[s]=function(e){if(!l())throw new Error("Please put useDescription function in the setup function!");const s=t(null),a=t(!1);return[function(t){n(a)&&c()||(s.value=t,e&&t.setDescProps(e),a.value=!0)},{setDescProps:e=>{n(s).setDescProps(e)}}]}({column:2,schema:w()});return{register:s,useI18n:d,t:e}}});E.render=function(e,t,s,n,a,o){const i=u("Description"),r=u("BasicModal");return p(),m(r,x({width:800,title:e.t("tableActionDesc")},e.$attrs),{default:f((()=>[b(i,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export{E as default};
