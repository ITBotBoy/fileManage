import{a5 as e,c as a,t,a$ as n,bx as s,cT as r,j as o,d as u,r as m,o as i,p as c,bc as l,aE as f,ad as d,ae as g,a as p,b as h,bh as b,a6 as S,U as F,bi as P,d0 as T,d1 as v}from"./index.cefb3244.js";import j from"./index.f69d2f66.js";import{a as x,u as R,b as w}from"./useRootSetting.5dbc4d80.js";import{a as y}from"./useWindowSizeFn.6a91d172.js";import"./domUtils.a209b89e.js";function A(){const{currentRoute:u}=e(),{getShowMultipleTab:m}=x(),i=a((()=>l(t(n.getRoutes()))||[])),c=a((()=>s.getTabsState.reduce(((e,a)=>(a.meta&&Reflect.has(a.meta,"frameSrc")&&e.push(a.path),e)),[])));function l(e){let a=[];for(const t of e){const{meta:{frameSrc:e}={},children:n}=t;e&&a.push(t),n&&n.length&&a.push(...l(n))}return a=r(a,"name"),a}return{hasRenderFrame:function(e){return!o(m)||o(c).includes(e)},getFramePages:i,showIframe:function(e){return e.path===o(u).path},getAllFramePages:l}}var E=u({name:"FrameLayout",components:{FramePage:j},setup:()=>({...A()})});E.render=function(e,a,t,n,s,r){const o=m("FramePage");return i(!0),c(f,null,l(e.getFramePages,(a=>(i(),c(f,{key:a.path},[a.meta.frameSrc&&e.hasRenderFrame(a.path)?d((i(),p(o,{key:0,frameSrc:a.meta.frameSrc},null,8,["frameSrc"])),[[g,e.showIframe(a)]]):h("",!0)],64)))),128)};var L=u({name:"PageLayout",setup(){const{getShowMenu:e}=R(),{getOpenKeepAlive:t,getCanEmbedIFramePage:n}=w(),{getBasicTransition:r,getEnableTransition:u}=b(),{getMax:m}=x(),i=function(){function e(){const{getOpenPageLoading:e,getEnableTransition:a}=b();e.value&&a.value&&S.setPageLoadingAction(!1)}return y((()=>{e(),stop()})),{onAfterEnter:e}}(),c=a((()=>o(t)&&o(e))),l=a((()=>s.getKeepAliveTabsState));return()=>F("div",null,F(P,null,{default:({Component:e,route:a})=>{const t=o(l),n=t.includes(a.name)&&a.meta.inTab?"fade-slide":null,s=()=>F(e,{key:a.fullPath}),f=o(c)?F(T,{max:o(m),include:t},s()):s();return o(u)?F(v,{...i,name:n||a.meta.transitionName||o(r),mode:"out-in",appear:!0},(()=>f)):f}}),o(n)&&F(E,null))}});export{L as default};
