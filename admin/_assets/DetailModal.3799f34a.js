import{d as e,h as t,c as s,j as a,U as n,b5 as o,bk as i,cQ as r,bm as l,bn as d,Y as c,r as u,o as p,a as m,w as f,v as b,m as x}from"./index.5b397b81.js";import{g as h,w as j,a as g}from"./index.55a98ad3.js";import{D as v}from"./index.5ce676ba.js";import{C as D}from"./index.fd47b0b6.js";import{p as y}from"./index.be505e56.js";import{getDescSchema as w}from"./data.bf50add5.js";import"./useWindowSizeFn.39afe110.js";import"./domUtils.a209b89e.js";import"./index.9b68ed0e.js";var M={useCollapse:y.bool.def(!0),title:y.string.def(""),size:y.oneOf(["small","default","middle",void 0]).def("small"),bordered:y.bool.def(!0),column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:y.object};var O=e({name:"Description",props:M,emits:["register"],setup(e,{attrs:l,slots:d,emit:c}){const u=t(null),p=s((()=>({...e,...a(u)}))),m=s((()=>({...a(p),title:void 0}))),f=s((()=>!!a(p).title)),b=s((()=>({canExpand:!1,...a(m).collapseOptions}))),x=s((()=>({...l,...a(m)})));function j({label:e,labelMinWidth:t,labelStyle:s}){if(!s&&!t)return e;const a={...s,minWidth:`${t}px `};return n("div",{style:a},e)}const g=()=>n(v,{class:"description",...a(x)},(()=>function(){const{schema:e}=a(m);return a(e).map((e=>{const{render:t,field:s,span:i,show:r,contentMinWidth:l}=e,{data:d}=a(m);if(r&&o(r)&&!r(d))return null;const c=()=>o(t)?t(null==d?void 0:d[s],d):a(d)&&a(d)[s],u=l;return n(v.Item,{label:j(e),key:s,span:i},(()=>l?n("div",{style:{minWidth:`${u}px`}},c()):c()))}))}()));return c("register",{setDescProps:function(e){const t=i(a(u)||{},e);u.value=r(t)}}),()=>a(f)?(()=>{const t=e.useCollapse?g():n("div",null,g());if(!e.useCollapse)return t;const{canExpand:s,helpMessage:o}=a(b),{title:i}=a(p);return n(D,{title:i,canExpan:s,helpMessage:o},{default:()=>t,action:()=>h(d,"action")})})():g()}});var E=e({name:"ErrorLogDetailModal",components:{BasicModal:g,Description:j(O)},props:{info:{type:Object,default:null}},setup(){const{t:e}=c("sys.errorLog"),[s]=function(e){if(!l())throw new Error("Please put useDescription function in the setup function!");const s=t(null),n=t(!1);return[function(t){a(n)&&d()||(s.value=t,e&&t.setDescProps(e),n.value=!0)},{setDescProps:e=>{a(s).setDescProps(e)}}]}({column:2,schema:w()});return{register:s,useI18n:c,t:e}}});E.render=function(e,t,s,a,n,o){const i=u("Description"),r=u("BasicModal");return p(),m(r,x({width:800,title:e.t("tableActionDesc")},e.$attrs),{default:f((()=>[b(i,{data:e.info,onRegister:e.register},null,8,["data","onRegister"])])),_:1},16,["title"])};export{E as default};
